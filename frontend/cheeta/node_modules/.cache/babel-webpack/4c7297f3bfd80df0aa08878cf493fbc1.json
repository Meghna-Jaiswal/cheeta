{"ast":null,"code":"import _asyncToGenerator from \"/home/meghna/mogi/kube-mogi/cheeta/frontend/cheeta/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet HomeComponent = class HomeComponent {\n  constructor(dialog, cheetaTicketService, cheetaUsersService) {\n    this.dialog = dialog;\n    this.cheetaTicketService = cheetaTicketService;\n    this.cheetaUsersService = cheetaUsersService;\n    this.bigTask = [];\n    this.smallTask = [];\n    this.score = 0;\n    this.topPerformers = [];\n    this.ticketSummary = [];\n    this.isLoading = true;\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.date = new Date();\n      _this.isLoading = true; // get users ticket/tasks\n\n      yield _this.getUsersTickets(); // get scores\n\n      yield _this.getScores(); // get project wise ticket summary\n\n      yield _this.getTicketSummary();\n      _this.isLoading = false;\n      _this.takeSub = _this.cheetaTicketService.getTicketUpdateListener().subscribe( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (data) {\n          yield _this.getUsersTickets();\n          yield _this.getTicketSummary();\n          yield _this.getScores();\n        });\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    })();\n  }\n\n  getUsersTickets() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      _this2.smallTask = [];\n      _this2.bigTask = [];\n      const filters = {\n        members: [localStorage.getItem('userId')]\n      };\n      let result = yield _this2.cheetaTicketService.getTickets(filters);\n      const userDetails = yield _this2.cheetaUsersService.getUserData();\n      _this2.userName = userDetails.data.name;\n      let userType = \"\";\n      if (userDetails) userType = userDetails.data.type;else return;\n\n      if (userType == 'software-developer') {\n        result.forEach(t => {\n          if (t.state != \"development\") return;\n          if (t.type == 'small') _this2.smallTask.push(t);\n          if (t.type == 'big') _this2.bigTask.push(t);\n        });\n      } else if (userType == 'quality-analyst') {\n        result.forEach(t => {\n          if (t.state != \"testing\") return;\n          if (t.type == 'small') _this2.smallTask.push(t);\n          if (t.type == 'big') _this2.bigTask.push(t);\n        });\n      } else {\n        result.forEach(t => {\n          if (t.state == \"deployed\") return;\n          if (t.type == 'small') _this2.smallTask.push(t);\n          if (t.type == 'big') _this2.bigTask.push(t);\n        });\n      }\n    })();\n  }\n\n  getScores() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      let result = yield _this3.cheetaUsersService.getScore();\n      _this3.score = result.userScore;\n      _this3.topPerformers = [...result.topPerformers];\n    })();\n  }\n\n  getTicketSummary() {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      let result = yield _this4.cheetaTicketService.getTicketSummary();\n      _this4.ticketSummary = result;\n    })();\n  }\n\n  ngOnDestroy() {\n    this.takeSub.unsubscribe();\n  }\n\n};\nHomeComponent = __decorate([Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.scss']\n})], HomeComponent);\nexport { HomeComponent };","map":{"version":3,"sources":["/home/meghna/mogi/kube-mogi/cheeta/frontend/cheeta/src/app/pages/home/home.component.ts"],"names":["__decorate","Component","HomeComponent","constructor","dialog","cheetaTicketService","cheetaUsersService","bigTask","smallTask","score","topPerformers","ticketSummary","isLoading","ngOnInit","date","Date","getUsersTickets","getScores","getTicketSummary","takeSub","getTicketUpdateListener","subscribe","data","filters","members","localStorage","getItem","result","getTickets","userDetails","getUserData","userName","name","userType","type","forEach","t","state","push","getScore","userScore","ngOnDestroy","unsubscribe","selector","templateUrl","styleUrls"],"mappings":"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","sourcesContent":["import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet HomeComponent = class HomeComponent {\n    constructor(dialog, cheetaTicketService, cheetaUsersService) {\n        this.dialog = dialog;\n        this.cheetaTicketService = cheetaTicketService;\n        this.cheetaUsersService = cheetaUsersService;\n        this.bigTask = [];\n        this.smallTask = [];\n        this.score = 0;\n        this.topPerformers = [];\n        this.ticketSummary = [];\n        this.isLoading = true;\n    }\n    async ngOnInit() {\n        this.date = new Date();\n        this.isLoading = true;\n        // get users ticket/tasks\n        await this.getUsersTickets();\n        // get scores\n        await this.getScores();\n        // get project wise ticket summary\n        await this.getTicketSummary();\n        this.isLoading = false;\n        this.takeSub = this.cheetaTicketService.getTicketUpdateListener()\n            .subscribe(async (data) => {\n            await this.getUsersTickets();\n            await this.getTicketSummary();\n            await this.getScores();\n        });\n    }\n    async getUsersTickets() {\n        this.smallTask = [];\n        this.bigTask = [];\n        const filters = {\n            members: [localStorage.getItem('userId')]\n        };\n        let result = await this.cheetaTicketService.getTickets(filters);\n        const userDetails = await this.cheetaUsersService.getUserData();\n        this.userName = userDetails.data.name;\n        let userType = \"\";\n        if (userDetails)\n            userType = userDetails.data.type;\n        else\n            return;\n        if (userType == 'software-developer') {\n            result.forEach((t) => {\n                if (t.state != \"development\")\n                    return;\n                if (t.type == 'small')\n                    this.smallTask.push(t);\n                if (t.type == 'big')\n                    this.bigTask.push(t);\n            });\n        }\n        else if (userType == 'quality-analyst') {\n            result.forEach((t) => {\n                if (t.state != \"testing\")\n                    return;\n                if (t.type == 'small')\n                    this.smallTask.push(t);\n                if (t.type == 'big')\n                    this.bigTask.push(t);\n            });\n        }\n        else {\n            result.forEach((t) => {\n                if (t.state == \"deployed\")\n                    return;\n                if (t.type == 'small')\n                    this.smallTask.push(t);\n                if (t.type == 'big')\n                    this.bigTask.push(t);\n            });\n        }\n    }\n    async getScores() {\n        let result = await this.cheetaUsersService.getScore();\n        this.score = result.userScore;\n        this.topPerformers = [...result.topPerformers];\n    }\n    async getTicketSummary() {\n        let result = await this.cheetaTicketService.getTicketSummary();\n        this.ticketSummary = result;\n    }\n    ngOnDestroy() {\n        this.takeSub.unsubscribe();\n    }\n};\nHomeComponent = __decorate([\n    Component({\n        selector: 'app-home',\n        templateUrl: './home.component.html',\n        styleUrls: ['./home.component.scss']\n    })\n], HomeComponent);\nexport { HomeComponent };\n"]},"metadata":{},"sourceType":"module"}