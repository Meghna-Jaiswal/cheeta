{"ast":null,"code":"import _asyncToGenerator from \"/home/meghna/mogi/kube-mogi/cheeta/frontend/cheeta/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { moveItemInArray, transferArrayItem } from '@angular/cdk/drag-drop';\nlet KanbanComponent = class KanbanComponent {\n  constructor(cheetaTicketService, cheetaUserService, cheetaTagsService) {\n    this.cheetaTicketService = cheetaTicketService;\n    this.cheetaUserService = cheetaUserService;\n    this.cheetaTagsService = cheetaTagsService;\n    this.backlog = [];\n    this.development = [];\n    this.testing = [];\n    this.deployment = [];\n    this.done = []; //filters option variables\n\n    this.projectName = \"\";\n    this.members = \"\";\n    this.priority = \"\";\n    this.projectNameArr = [];\n    this.membersArr = [];\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this.getTickets({});\n      let resMembers = yield _this.cheetaUserService.getUsersList();\n      if (resMembers && resMembers.length) _this.membersArr = resMembers;\n      let resProjects = yield _this.cheetaTagsService.getProjectsList();\n      if (resProjects && resProjects.length) _this.projectNameArr = resProjects;\n    })();\n  }\n\n  drop(event) {\n    // console.log('event ::',event)\n    if (event.previousContainer === event.container) {\n      moveItemInArray(event.container.data, event.previousIndex, event.currentIndex);\n    } else {\n      transferArrayItem(event.previousContainer.data, event.container.data, event.previousIndex, event.currentIndex);\n      this.updateTicketStatus(event.container.data[event.currentIndex], event.container.id);\n    }\n  } // it will work on two conditions\n  // * onInIt\n  // * using filters\n\n\n  getTickets(filters) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      let result = yield _this2.cheetaTicketService.getTickets(filters);\n      _this2.backlog = [];\n      _this2.development = [];\n      _this2.testing = [];\n      _this2.deployment = [];\n      _this2.done = []; // console.log(result)\n\n      result.forEach(i => {\n        if (i.state == 'backlog') _this2.backlog.push(i);\n        if (i.state == 'development') _this2.development.push(i);\n        if (i.state == 'testing') _this2.testing.push(i);\n        if (i.state == 'deployment') _this2.deployment.push(i);\n        if (i.state == 'done') _this2.done.push(i);\n      });\n    })();\n  }\n\n  updateTicketStatus(ticket, state) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      console.log('ticket :', ticket);\n      console.log('to state :', state);\n      let result = yield _this3.cheetaTicketService.updateTicketState(ticket, state);\n    })();\n  }\n\n  onApply() {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      const filterOption = {};\n      if (_this4.members) filterOption['members'] = [_this4.members];\n      if (_this4.priority) filterOption['priority'] = _this4.priority;\n      if (_this4.projectName) filterOption['project'] = [_this4.projectName];\n      yield _this4.getTickets(filterOption);\n    })();\n  }\n\n};\nKanbanComponent = __decorate([Component({\n  selector: 'app-kanban',\n  templateUrl: './kanban.component.html',\n  styleUrls: ['./kanban.component.scss']\n})], KanbanComponent);\nexport { KanbanComponent };","map":{"version":3,"sources":["/home/meghna/mogi/kube-mogi/cheeta/frontend/cheeta/src/app/pages/kanban/kanban.component.ts"],"names":["__decorate","Component","moveItemInArray","transferArrayItem","KanbanComponent","constructor","cheetaTicketService","cheetaUserService","cheetaTagsService","backlog","development","testing","deployment","done","projectName","members","priority","projectNameArr","membersArr","ngOnInit","getTickets","resMembers","getUsersList","length","resProjects","getProjectsList","drop","event","previousContainer","container","data","previousIndex","currentIndex","updateTicketStatus","id","filters","result","forEach","i","state","push","ticket","console","log","updateTicketState","onApply","filterOption","selector","templateUrl","styleUrls"],"mappings":"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","sourcesContent":["import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { moveItemInArray, transferArrayItem } from '@angular/cdk/drag-drop';\nlet KanbanComponent = class KanbanComponent {\n    constructor(cheetaTicketService, cheetaUserService, cheetaTagsService) {\n        this.cheetaTicketService = cheetaTicketService;\n        this.cheetaUserService = cheetaUserService;\n        this.cheetaTagsService = cheetaTagsService;\n        this.backlog = [];\n        this.development = [];\n        this.testing = [];\n        this.deployment = [];\n        this.done = [];\n        //filters option variables\n        this.projectName = \"\";\n        this.members = \"\";\n        this.priority = \"\";\n        this.projectNameArr = [];\n        this.membersArr = [];\n    }\n    async ngOnInit() {\n        await this.getTickets({});\n        let resMembers = await this.cheetaUserService.getUsersList();\n        if (resMembers && resMembers.length)\n            this.membersArr = resMembers;\n        let resProjects = await this.cheetaTagsService.getProjectsList();\n        if (resProjects && resProjects.length)\n            this.projectNameArr = resProjects;\n    }\n    drop(event) {\n        // console.log('event ::',event)\n        if (event.previousContainer === event.container) {\n            moveItemInArray(event.container.data, event.previousIndex, event.currentIndex);\n        }\n        else {\n            transferArrayItem(event.previousContainer.data, event.container.data, event.previousIndex, event.currentIndex);\n            this.updateTicketStatus(event.container.data[event.currentIndex], event.container.id);\n        }\n    }\n    // it will work on two conditions\n    // * onInIt\n    // * using filters\n    async getTickets(filters) {\n        let result = await this.cheetaTicketService.getTickets(filters);\n        this.backlog = [];\n        this.development = [];\n        this.testing = [];\n        this.deployment = [];\n        this.done = [];\n        // console.log(result)\n        result.forEach((i) => {\n            if (i.state == 'backlog')\n                this.backlog.push(i);\n            if (i.state == 'development')\n                this.development.push(i);\n            if (i.state == 'testing')\n                this.testing.push(i);\n            if (i.state == 'deployment')\n                this.deployment.push(i);\n            if (i.state == 'done')\n                this.done.push(i);\n        });\n    }\n    async updateTicketStatus(ticket, state) {\n        console.log('ticket :', ticket);\n        console.log('to state :', state);\n        let result = await this.cheetaTicketService.updateTicketState(ticket, state);\n    }\n    async onApply() {\n        const filterOption = {};\n        if (this.members)\n            filterOption['members'] = [this.members];\n        if (this.priority)\n            filterOption['priority'] = this.priority;\n        if (this.projectName)\n            filterOption['project'] = [this.projectName];\n        await this.getTickets(filterOption);\n    }\n};\nKanbanComponent = __decorate([\n    Component({\n        selector: 'app-kanban',\n        templateUrl: './kanban.component.html',\n        styleUrls: ['./kanban.component.scss']\n    })\n], KanbanComponent);\nexport { KanbanComponent };\n"]},"metadata":{},"sourceType":"module"}